# üêõ –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫ - MarketplaceManager

## üìÖ –î–∞—Ç–∞: 2024-12-19

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. **Ozon API - –û—à–∏–±–∫–∞ 400: Request validation error**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
"Request validation error: invalid GetProductInfoStocksRequest.Limit: value must be inside range (0, 1000]"
```

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ `product_ids`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `limit: 1000` –≤ –∑–∞–ø—Ä–æ—Å stocks API
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `filter: {}` –≤ –∑–∞–ø—Ä–æ—Å stocks API

#### üìù –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–ø–∏—Å–æ–∫ product_ids –Ω–µ –ø—É—Å—Ç–æ–π
if not product_ids:
    return {"success": False, "error": "–°–ø–∏—Å–æ–∫ product_ids –ø—É—Å—Ç–æ–π"}

# –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Ozon API
payload = {
    "product_id": product_ids,
    "limit": 1000,  # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ limit
    "filter": {}     # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ filter
}
```

### 2. **Ozon Analytics API - –û—à–∏–±–∫–∞ 400: Dimensions validation**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
"Request validation error: invalid AnalyticsGetDataRequest.Dimensions: value must contain between 1 and 4 items, inclusive"
```

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ `dimension` ‚Üí `dimensions` (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ `offer_id` ‚Üí `sku` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `limit: 1000`

#### üìù –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
payload = {
    "date_from": date_from,
    "date_to": date_to,
    "metrics": ["revenue", "orders_count"],
    "dimensions": ["sku"],  # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º dimension -> dimensions
    "limit": 1000          # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ limit
}
```

### 3. **Google Sheets API - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã**

#### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
```
'GoogleSheetsAPI' object has no attribute 'read_data'
```

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `read_data()` –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `write_data()` –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü—É

#### üìù –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```python
async def read_data(self, spreadsheet_id: str, range_name: str) -> List[List]:
    """–ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã"""
    # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞

async def write_data(self, spreadsheet_id: str, range_name: str, data: List[List]) -> bool:
    """–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω —Ç–∞–±–ª–∏—Ü—ã"""
    # ... —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- **Ozon API**: –£—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 5 —Ç–æ–≤–∞—Ä–æ–≤
- **Google Sheets API**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- **Wildberries API**: API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### üìä –°—Ç–∞—Ç—É—Å API –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
üìä –°—Ç–∞—Ç—É—Å API:
  ozon: ‚úÖ
    api_key: ‚úÖ
    client_id: ‚úÖ
  wildberries: ‚ùå
    api_key: ‚ùå
  google_sheets: ‚úÖ

üîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:
  ozon: ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
  wildberries: ‚ö†Ô∏è  API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
  google_sheets: ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ

üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
  Ozon: ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 5 —Ç–æ–≤–∞—Ä–æ–≤ Ozon
  Wildberries: API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
```

## üéØ –í—ã–≤–æ–¥—ã

1. **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**
2. **Ozon API —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
3. **Google Sheets API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω**
4. **–ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
2. **–î–æ–±–∞–≤–∏—Ç—å Wildberries API –∫–ª—é—á** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞**

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Ozon API Documentation](https://docs.ozon.ru/api/seller/en/)
- [Google Sheets API Documentation](https://developers.google.com/sheets/api)
- [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
- [modules/README_marketplace.md](./modules/README_marketplace.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è
