# Ozon API - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å API Ozon Seller –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö, –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –∏ –æ—Å—Ç–∞—Ç–∫–∞—Ö.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ product_id –ø–æ offer_id
- **–ú–µ—Ç–æ–¥:** `POST /v2/product/list`
- **–§—É–Ω–∫—Ü–∏—è:** `get_product_mapping()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç—Ä–æ–∏—Ç —Å–ª–æ–≤–∞—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É `offer_id` –∏ `product_id`

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (–ø—Ä–æ–¥–∞–∂–∏, –≤—ã—Ä—É—á–∫–∞)
- **–ú–µ—Ç–æ–¥:** `POST /v1/analytics/data`
- **–§—É–Ω–∫—Ü–∏—è:** `get_analytics()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–∂ –∏ –≤—ã—Ä—É—á–∫–∏ –ø–æ —Ç–æ–≤–∞—Ä–∞–º

### 3. –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ
- **–ú–µ—Ç–æ–¥:** `POST /v3/product/info/stocks`
- **–§—É–Ω–∫—Ü–∏—è:** `get_stocks()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export OZON_API_KEY="–≤–∞—à_api_–∫–ª—é—á"
export OZON_CLIENT_ID="–≤–∞—à_client_id"
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install httpx
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from modules.ozon_api import OzonAPI

# –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
ozon_api = OzonAPI()

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è offer_id ‚Üí product_id
mapping_result = await ozon_api.get_product_mapping()
if mapping_result["success"]:
    mapping = mapping_result["mapping"]
    print(f"–ù–∞–π–¥–µ–Ω–æ {len(mapping)} —Ç–æ–≤–∞—Ä–æ–≤")
```

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö offer_id
offer_ids = ["RV-01", "KU-1-PVK", "ZL-01"]
complete_result = await ozon_api.get_complete_product_data(offer_ids)

if complete_result["success"]:
    # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
    analytics = complete_result["analytics"]
    
    # –û—Å—Ç–∞—Ç–∫–∏
    stocks = complete_result["stocks"]
    
    # –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
    mapping = complete_result["mapping"]
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤

### Product Mapping
```python
{
    "success": True,
    "mapping": {
        "RV-01": 1982647068,
        "KU-1-PVK": 2343897403,
        "ZL-01": 2220053403
    },
    "total_count": 3,
    "page": 1,
    "page_size": 1000
}
```

### Analytics
```python
{
    "success": True,
    "data": {
        "result": {
            "data": [
                {
                    "dimensions": {"product_id": 1982647068},
                    "metrics": {
                        "ordered_units": 5,
                        "revenue": 15000
                    }
                }
            ]
        }
    },
    "period": "2024-01-01 - 2024-01-08",
    "product_count": 1
}
```

### Stocks
```python
{
    "success": True,
    "product_id": 1982647068,
    "total_stock": 25,
    "warehouse_stocks": [
        {
            "warehouse_id": 123,
            "present": 15,
            "reserved": 2
        }
    ],
    "raw_data": {...}
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
python test_ozon_api.py
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
python examples/ozon_api_usage.py
```

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

- **Rate Limiting:** API Ozon –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–¢–∞–π–º–∞—É—Ç—ã:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã 15-20 —Å–µ–∫—É–Ω–¥
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–æ–º `success`:
- `True` - –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- `False` - –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–¥–µ—Ç–∞–ª–∏ –≤ –∫–ª—é—á–µ `error`)

```python
result = await ozon_api.get_stocks(product_id)
if not result["success"]:
    print(f"–û—à–∏–±–∫–∞: {result['error']}")
    return

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ
stock_data = result["total_stock"]
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Batch –æ–ø–µ—Ä–∞—Ü–∏–∏
–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ç–æ–≤–∞—Ä–∞–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –º–µ—Ç–æ–¥—ã:
- `get_stocks_batch()` - –æ—Å—Ç–∞—Ç–∫–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- `get_complete_product_data()` - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö offer_id

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å `product_mapping`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ä–µ–¥–∫–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è.

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env` —Ñ–∞–π–ª—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API Ozon

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º API Ozon –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
